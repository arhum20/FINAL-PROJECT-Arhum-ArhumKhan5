!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-array"),require("d3-axis"),require("d3-dispatch"),require("d3-drag"),require("d3-ease"),require("d3-scale"),require("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-axis","d3-dispatch","d3-drag","d3-ease","d3-scale","d3-selection"],e):e(t.d3=t.d3||{},t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3)}(this,function(t,Q,r,R,_,H,P,C){"use strict";var E=200,G=8,I=1,J=2,K=3,N=4;function S(t){return"translate("+t+",0)"}function U(t){return"translate(0,"+t+")"}function e(n,l){l=void 0!==l?l:null;var i=0,e=0,s=[0,10],c=100,o=100,u=!0,d="M-5.5,-5.5v10l6,5.5l6,-5.5v-10z",f=null,p=null,m=null,g=null,h=null,v=null,k=null,x=R.dispatch("onchange","start","end","drag"),y=null,b=null,w=n===I||n===N?-1:1,q=n===N||n===J?"y":"x",A=n===N||n===J?"x":"y",z=n===I||n===K?S:U,F=n===I||n===K?U:S,L=null;switch(n){case I:L=r.axisTop;break;case J:L=r.axisRight;break;case K:L=r.axisBottom;break;case N:L=r.axisLeft}var V=null,M=null,D=null;function a(t){y=t.selection?t.selection():t,l=l?(s=[Q.min(l.domain()),Q.max(l.domain())],l.clamp(!0)):(l=s[0]instanceof Date?P.scaleTime():P.scaleLinear()).domain(s).range([0,n===I||n===K?c:o]).clamp(!0),b=P.scaleLinear().range(l.range()).domain(l.range()).clamp(!0),i=P.scaleLinear().range(s).domain(s).clamp(!0)(i),g=g||l.tickFormat(),v=v||g||l.tickFormat(),y.selectAll(".axis").data([null]).enter().append("g").attr("transform",F(7*w)).attr("class","axis");var r=y.selectAll(".slider").data([null]),e=r.enter().append("g").attr("class","slider").attr("cursor",n===I||n===K?"ew-resize":"ns-resize").call(_.drag().on("start",function(){C.select(this).classed("active",!0);var t=b(n===K||n===I?C.event.x:C.event.y),e=T(l.invert(t));B(e),x.call("start",r,e),j(e,!0)}).on("drag",function(){var t=b(n===K||n===I?C.event.x:C.event.y),e=T(l.invert(t));B(e),x.call("drag",r,e),j(e,!0)}).on("end",function(){C.select(this).classed("active",!1);var t=b(n===K||n===I?C.event.x:C.event.y),e=T(l.invert(t));B(e),x.call("end",r,e),j(e,!0)}));e.append("line").attr("class","track").attr(q+"1",l.range()[0]-G).attr("stroke","#bbb").attr("stroke-width",6).attr("stroke-linecap","round"),e.append("line").attr("class","track-inset").attr(q+"1",l.range()[0]-G).attr("stroke","#eee").attr("stroke-width",4).attr("stroke-linecap","round"),k&&e.append("line").attr("class","track-fill").attr(q+"1",l.range()[0]-G).attr("stroke",k).attr("stroke-width",4).attr("stroke-linecap","round"),e.append("line").attr("class","track-overlay").attr(q+"1",l.range()[0]-G).attr("stroke","transparent").attr("stroke-width",40).attr("stroke-linecap","round").merge(r.select(".track-overlay"));var a=e.append("g").attr("class","parameter-value").attr("transform",z(l(i))).attr("font-family","sans-serif").attr("text-anchor",n===J?"start":n===N?"end":"middle");a.append("path").attr("transform","rotate("+90*(n+1)+")").attr("d",d).attr("fill","white").attr("stroke","#777"),u&&a.append("text").attr("font-size",10).attr(A,27*w).attr("dy",n===I?"0em":n===K?".71em":".32em").text(g(i)),t.select(".track").attr(q+"2",l.range()[1]+G),t.select(".track-inset").attr(q+"2",l.range()[1]+G),k&&t.select(".track-fill").attr(q+"2",l(i)),t.select(".track-overlay").attr(q+"2",l.range()[1]+G),t.select(".axis").call(L(l).tickFormat(g).ticks(h).tickValues(p)),y.select(".axis").select(".domain").remove(),t.select(".axis").attr("transform",F(7*w)),t.selectAll(".axis text").attr("fill","#aaa").attr(A,20*w).attr("dy",n===I?"0em":n===K?".71em":".32em").attr("text-anchor",n===J?"start":n===N?"end":"middle"),t.selectAll(".axis line").attr("stroke","#aaa"),t.select(".parameter-value").attr("transform",z(l(i))),O(),D=y.select(".parameter-value text"),V=y.select(".parameter-value"),M=y.select(".track-fill")}function O(){if(u){var e=[];y.selectAll(".axis .tick").each(function(t){e.push(Math.abs(t-i))});var r=Q.scan(e);y.selectAll(".axis .tick text").attr("opacity",function(t,e){return e===r?0:1})}}function T(e){if(f){var t=(e-s[0])%f,r=e-t;return f<2*t&&(r+=f),e instanceof Date?new Date(r):r}if(m){var a=Q.scan(m.map(function(t){return Math.abs(e-t)}));return m[a]}return e}function j(t,e){i!==t&&(i=t,e&&x.call("onchange",a,t),O())}function B(t,e){(e=void 0!==e&&e)?(V.transition().ease(H.easeQuadOut).duration(E).attr("transform",z(l(t))),k&&M.transition().ease(H.easeQuadOut).duration(E).attr(q+"1",l(t))):(V.attr("transform",z(l(t))),k&&M.attr(q+"2",l(t))),u&&D.text(v(t))}return a.min=function(t){return arguments.length?(s[0]=t,a):s[0]},a.max=function(t){return arguments.length?(s[1]=t,a):s[1]},a.domain=function(t){return arguments.length?(s=t,a):s},a.width=function(t){return arguments.length?(c=t,a):c},a.height=function(t){return arguments.length?(o=t,a):o},a.tickFormat=function(t){return arguments.length?(g=t,a):g},a.displayFormat=function(t){return arguments.length?(v=t,a):v},a.ticks=function(t){return arguments.length?(h=t,a):h},a.value=function(t){if(!arguments.length)return i;var e=b(l(t)),r=T(l.invert(e));return B(r,!0),j(r,!0),a},a.silentValue=function(t){if(!arguments.length)return i;var e=b(l(t)),r=T(l.invert(e));return B(r,!1),j(r,!1),a},a.default=function(t){return arguments.length?(i=e=t,a):e},a.step=function(t){return arguments.length?(f=t,a):f},a.tickValues=function(t){return arguments.length?(p=t,a):p},a.marks=function(t){return arguments.length?(m=t,a):m},a.handle=function(t){return arguments.length?(d=t,a):d},a.displayValue=function(t){return arguments.length?(u=t,a):u},a.fill=function(t){return arguments.length?(k=t,a):k},a.on=function(){var t=x.on.apply(x,arguments);return t===x?a:t},a}t.sliderHorizontal=function(t){return e(K,t)},t.sliderVertical=function(t){return e(N,t)},t.sliderTop=function(t){return e(I,t)},t.sliderRight=function(t){return e(J,t)},t.sliderBottom=function(t){return e(K,t)},t.sliderLeft=function(t){return e(N,t)},Object.defineProperty(t,"__esModule",{value:!0})});